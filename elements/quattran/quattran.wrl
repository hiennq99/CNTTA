#VRML V2.0 utf8


DEF	phanquay Transform {
	children [
		Transform{
			translation	0 0 0
			scale 1 0.2 1
			children[
				Shape {
					appearance Appearance {
						material Material {
							diffuseColor 0 .25 .24

						}
					} 
					geometry Sphere {radius 1}
				}

				Transform{
					translation 3.6 0 0
					rotation 0 0 0 0
				    children [	
						DEF canhquat  Transform 
						{
							rotation 1 0 0 0
							children 
							[
								Shape {
									appearance Appearance {
										material Material {
											diffuseColor 0 .25 .24

										}
									}
									geometry Box {size 5 0.01 1.5}
								}
							]
						}
					]
				}
	
				Transform
				{
					translation -2 0 3
					rotation 0 1 0 1.046666
				    children 
					[
						Transform 
						{
							
							children 
							[
								USE canhquat 
							]
						}
					]
				}
				
				Transform
				{
					translation -2 0 -3
					rotation 0 1 0 -1.046666
				    children 
					[
						Transform 
						{
							children 
							[
								USE	canhquat
							]
						}
					]
				}
			
				Transform
				{
					translation	1 0.1 0
					children
					[
						DEF chotquat Shape {
							appearance Appearance {
								material Material {
									diffuseColor 0 .25 .24
								}
							}geometry Box {size 1.5 0.01 0.5}
						}
					]
				}

				Transform
				{
					translation	-0.9 0.1 1.1
					rotation 0 1 0 1.046666
					children [USE chotquat ]
				}

				Transform
				{
					translation	-0.9 0 -1.1
					rotation 0 1 0 -1.046666
					children [USE chotquat ]
				}
			]
		}
	]
}

Transform{
	translation	0 0.6 0
	children[
		DEF up Shape {
			appearance Appearance {
				material Material {
					diffuseColor 0 .25 .24

				}
			}
			geometry Cone {height 1.2 bottomRadius 0.4}
		}
	]
}

Transform
{
	translation	0 2 0
	children
	[
		Shape {appearance Appearance {
				material Material {
					diffuseColor 0 .25 .24

				}
			}geometry Cylinder {height 3 radius 0.1}}
	]
}

Transform
{
	translation	0 3 0
	rotation 0 0 1 3.14
	children [USE up]
}

DEF	touch TouchSensor{}
DEF	timer1 TimeSensor {
	cycleInterval 0.1
	loop FALSE
	enabled	FALSE
}
DEF	timer2 TimeSensor {
	cycleInterval 1
	loop TRUE
	enabled	FALSE
}
DEF	timer TimeSensor {
	cycleInterval 0.1
	loop FALSE
	enabled	FALSE
}
DEF	control Script {
	eventIn	SFBool turn
	eventOut SFBool	on
	eventOut SFBool	off
	field SFBool x TRUE
	url	"javascript:
	function turn(val){
		if(val){
			if(x){
				on = true;
				off = false
			}else{
				on = false;
				off = true;
			}
			x=!x;
		}
	}
	"
}
DEF	oInterC1 OrientationInterpolator	{
	key[0.5 1]
	keyValue [0 0 1 1.57, 0 0 1 0]
}
DEF	oInterC OrientationInterpolator {
	key	[0 1]
	keyValue [0 0 1 0,0 0 1 1.57]
}
DEF	oInterQ OrientationInterpolator {
	key	[0 0.5 1]
	keyValue [0 1 0 0,0 1 0 3.14,0 1 0 6.28]
}
ROUTE touch.isActive TO	control.turn
ROUTE control.on TO	timer1.enabled
ROUTE control.on TO	timer2.enabled
ROUTE control.off TO timer.enabled
ROUTE touch.touchTime TO timer2.startTime
ROUTE touch.touchTime TO timer.startTime
ROUTE touch.touchTime TO timer1.startTime
ROUTE timer2.fraction_changed TO oInterQ.set_fraction
ROUTE oInterQ.value_changed	TO phanquay.rotation
ROUTE timer1.fraction_changed TO	oInterC.set_fraction
ROUTE timer.fraction_changed TO oInterC1.set_fraction
